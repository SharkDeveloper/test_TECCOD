# Тестовое приложение с OpenSearch

Это простое веб-приложение, демонстрирующее интеграцию с OpenSearch для индексации и поиска документов. Оно включает веб-интерфейс на базе Flask для поиска документов по ключевому слову с фильтрацией по типу контента.

## Требования

- Установленные Docker и Docker Compose на вашей системе.
- Python 3.10+ (если запускаете локально без Docker).

## Структура проекта

- `docker-compose.yml`: Определяет сервисы для OpenSearch и веб-приложения.
- `Dockerfile`: Собирает окружение Python для веб-приложения.
- `requirements.txt`: Зависимости Python (Flask и opensearch-py).
- `app.py`: Основное приложение Flask, которое подкл��чается к OpenSearch, создает индекс, загружает тестовые данные и обрабатывает поисковые запросы.

## Установка и запуск

1. **Клонируйте или перейдите в директорию проекта**:
   Убедитесь, что вы находитесь в директории с файлами проекта (например, `d:\Valerian\Documents\OneDrive\Python\test_TECCOD`).

2. **Соберите и запустите сервисы**:
   Выполните следующую команду в терминале:
   ```
   docker-compose up --build
   ```
   - Это загрузит образ OpenSearch, соберет образ веб-приложения и запустит оба контейнера.
   - OpenSearch будет доступен по адресу `http://localhost:9200`.
   - Веб-приложение будет доступно по адресу `http://localhost:5000`.

3. **Доступ к веб-приложению**:
   - Откройте веб-браузер и перейдите по адресу `http://localhost:5000`.
   - Вы увидите форму поиска с полем для ключевого слова и радиокнопками для типов контента (type1, type2, type3, type4).

## Использование

1. **Поиск документов**:
   - Введите ключевое слово в поле поиска (например, "content" или "document").
   - Опционально выберите тип контента с помощью радиокнопок для фильтрации результатов.
   - Нажмите "Search" для отправки формы.

2. **Результаты поиска**:
   - Результаты отображаются в виде списка с заголовком документа и сниппетом (первые 50 символов контента).
   - Поиск осуществляется по полям `title` и `content` в OpenSearch.
   - Если выбран тип контента, возвращаются только документы, соответствующие этому типу.

3. **Тестовые данные**:
   - При первом запуске приложение загружает 5 тестовых документов в индекс `test_index`.
   - Типы контента: type1, type2, type3, type4.

## Остановка приложения

- Нажмите `Ctrl+C` в терминале, где запущен `docker-compose up`.
- Чтобы удалить контейнеры и сети: `docker-compose down`.

## Устранение неисправностей

- Если OpenSearch не запускается, проверьте логи контейнера на наличие проблем с паролем или безопасностью.
- Убедитесь, что Docker запущен и выделено достаточно ресурсов.
- При ошибках соединения проверьте, что веб-приложение зависит от готовности OpenSearch (как указано в docker-compose.yml).

Для получения дополнительной информации обратитесь к коду в `app.py` или документации OpenSearch.